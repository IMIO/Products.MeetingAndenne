[buildout]
extends =
    base.cfg
    versions-prod.cfg

parts += zeoserver
         debug-instance
         instance2
         instance3
         instance4


[zeoserver]
recipe = plone.recipe.zeoserver
zeo-address = 8100
effective-user = ${buildout:effective-user}
pack-days = 1
monitor-address = 8101
zeo-conf-additional =
  %define FILESTORAGE ${buildout:directory}/var/filestorage
  %define BLOBSTORAGE ${buildout:directory}/var/blobstorage
  %include ${buildout:directory}/zeo_add.conf


[instance]
recipe = plone.recipe.zope2instance
zeo-client = true
zeo-address = ${zeoserver:zeo-address}
zodb-cache-size = 5000
zeo-client-cache-size = 300MB
shared-blob = on
zope-conf-additional =
  %define ZEOADDRESS ${zeoserver:zeo-address}
  %define ZEOINSTANCE ${buildout:directory}/parts/zeoserver/var
  %define BLOBSTORAGE ${buildout:directory}/var/blobstorage
  %include ${buildout:directory}/zope_add_zeo.conf

eggs += archetypes.schematuning

[instance2]
<= instance
http-address = 8081

[instance3]
<= instance
http-address = 8082

[instance4]
<= instance
http-address = 8083

[debug-instance]
<= instance
http-address = 8085
debug-mode = on
verbose-security = on
